<div class="d-flex  bg-success radius-15 login m-auto ">
  <div class="radius-15 text-center bg-secondary p-3  info-side py-5 text-success">
    <h5 class="font-weight-normal my-5">{{'_Login' | translate}}</h5>
    <div>
      <h4 class="text-primary ">{{'_WelcomeBack' | translate}}</h4>
      <p class="desc ">{{'_KeepConnected' | translate}}</p>
      <button class="btn btn-secondary border-white radius-15 w-100 mt-5 "
              routerLink="/auth/login">{{'_SignIn' | translate}}</button>
    </div>
  </div>
  <div class=" text-center  py-5 form-side">
    <!--    code form-->
    <form [formGroup]="codeForm" class="w-75 m-auto mt-5 code-form" *ngIf="!isOTP">
      <h4 class="font-weight-normal text-secondary mb-4">{{'_Register' | translate}}</h4>
      <div class="text-center"><img src="assets/images/icon/register.svg" class="icon" alt=""></div>
      <mat-form-field appearance="legacy" class="text-left w-100">
        <mat-label>{{'_Email'|  translate}}</mat-label>
        <input matInput placeholder="" formControlName="email">
        <mat-icon matSuffix>alternate_email</mat-icon>
        <mat-error>
          <div *ngIf="f.email.invalid && (f.email.dirty || f.email.touched)">
            <div *ngIf="f.email.errors.required">
              {{'_EmailRequired' | translate}}
            </div>
            <div *ngIf="f.email.errors.email">{{'_EmailNotValid' | translate}}</div>
          </div>
        </mat-error>
      </mat-form-field>
      <mat-form-field class="w-100 text-left">
        <mat-label>{{'_Mobile' | translate}}</mat-label>
        <span matPrefix>+971 &nbsp;</span>
        <input type="tel" matInput placeholder="554 5***" formControlName="phone" maxlength="9">
        <mat-icon matSuffix>mode_edit</mat-icon>
        <mat-error>
          {{'_MobileRequired' |  translate}}
        </mat-error>
      </mat-form-field>

      <div class="mt-3">
        <button
          class="btn btn-primary radius-15  bg-success text-primary mb-3 mx-1" [disabled]="codeForm.invalid"
          (click)="sendOTP()">{{'_SendVerificationCode' | translate}}</button>
        <div style="cursor: pointer"><a class=" mb-3 mx-1"
                                        (click)="isOTP = true">{{'_IHaveVerificationCode' | translate}}</a></div>
      </div>
      <div>
        <!--        <app-social-integration></app-social-integration>-->
      </div>
    </form>

    <mat-tab-group *ngIf="isOTP" mat-align-tabs="start">
      <mat-tab label="{{'_Register' | translate}}">


        <!--    register form-->
        <form [formGroup]="registerForm" class="w-75 mx-auto mt-5 ">
          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_FirstName'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="first_name">
            <mat-icon matSuffix>sentiment_satisfied_alt</mat-icon>
            <mat-error *ngIf="partnerForm.get('first_name').hasError('required')">
              {{'_FirstNameRequired' |  translate}}
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_LastName'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="last_name">
            <mat-icon matSuffix>sentiment_satisfied_alt</mat-icon>
            <mat-error *ngIf="partnerForm.get('last_name').hasError('required')">
              {{'_LastNameRequired' |  translate}}
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_Email'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="email">
            <mat-icon matSuffix>alternate_email</mat-icon>
            <mat-error>
              <div *ngIf="p.email.invalid && (p.email.dirty || p.email.touched)">
                <div *ngIf="p.email.errors.required">
                  {{'_EmailRequired' | translate}}
                </div>
                <div *ngIf="p.email.errors.email">{{'_EmailNotValid' | translate}}</div>
              </div>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="w-100 text-left">
            <mat-label>{{'_Mobile' | translate}}</mat-label>
            <span matPrefix>+971 &nbsp;</span>
            <input type="tel" matInput placeholder="554 5***" formControlName="phone" maxlength="9">
            <mat-icon matSuffix>mode_edit</mat-icon>
            <mat-error>
              {{'_MobileRequired' |  translate}}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_Password'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="password" type="password" maxlength="16">
            <mat-icon matSuffix>vpn_key</mat-icon>
            <mat-error>
              <div *ngIf="p.password.invalid && (p.password.dirty ||p.password.touched)">
                <div *ngIf="p.password.errors.required">
                  {{'_PasswordRequired' | translate}}
                </div>
                <div
                  *ngIf="p.password.errors.minlength || p.password.errors.maxLength"> {{'_PasswordValidation' | translate}}</div>
              </div>
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_ConfirmPassword'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="ConfirmPassword" type="password">
            <mat-icon matSuffix>vpn_key</mat-icon>
            <mat-error>
              <div *ngIf="p.ConfirmPassword.invalid && (p.ConfirmPassword.dirty || p.ConfirmPassword.touched)"
              >
                <div *ngIf="p.ConfirmPassword.errors.required">
                  {{'_ConfirmPasswordRequired' | translate}}
                </div>
                <div *ngIf="p.ConfirmPassword.errors.mustMatch"> {{'_PasswordMustMutch' | translate}}</div>
              </div>
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_VerificationCode'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="otp" maxlength="4">
            <mat-icon matSuffix>vpn_key</mat-icon>
            <mat-error>
              {{'_VerificationCodeRequired' |  translate}}
            </mat-error>
          </mat-form-field>

          <div class="mt-3">
            <button *ngIf="isOTP"
                    class="btn btn-primary radius-15 w-100 bg-success text-primary mb-3"
                    [disabled]="registerForm.invalid"
                    (click)="register('user')">{{'_Register' | translate}}</button>
          </div>
          <div>
            <app-social-integration></app-social-integration>
          </div>
          <div class="text-center mt-5">
            <a style="cursor: pointer" (click)="isOTP = false">{{ '_ResendVerificationCode' | translate}}</a>
          </div>
        </form>


      </mat-tab>
      <mat-tab label="{{'_BePartner' | translate}}">
        <form [formGroup]="partnerForm" class="w-75 mx-auto mt-5" *ngIf="isOTP">
          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_FirstName'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="first_name">
            <mat-icon matSuffix>sentiment_satisfied_alt</mat-icon>
            <mat-error *ngIf="partnerForm.get('first_name').hasError('required')">
              {{'_FirstNameRequired' |  translate}}
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_LastName'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="last_name">
            <mat-icon matSuffix>sentiment_satisfied_alt</mat-icon>
            <mat-error *ngIf="partnerForm.get('last_name').hasError('required')">
              {{'_LastNameRequired' |  translate}}
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="legacy" class="w-100 text-left">
            <mat-label> {{'_Designation'|  translate}}</mat-label>
            <input matInput formControlName="designation">
            <mat-icon matSuffix>work</mat-icon>
            <mat-error>
              Designation is required
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_Email'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="email">
            <mat-icon matSuffix>alternate_email</mat-icon>
            <mat-error>
              <div *ngIf="p.email.invalid && (p.email.dirty || p.email.touched)">
                <div *ngIf="p.email.errors.required">
                  {{'_EmailRequired' | translate}}
                </div>
                <div *ngIf="p.email.errors.email">{{'_EmailNotValid' | translate}}</div>
              </div>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="w-100">
            <mat-label>{{'_Mobile' | translate}}</mat-label>
            <span matPrefix>+971 &nbsp;</span>
            <input type="tel" matInput placeholder="554 5***" formControlName="phone" maxlength="9">
            <mat-icon matSuffix>mode_edit</mat-icon>
            <mat-error>
              {{'_MobileRequired' |  translate}}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_Password'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="password">
            <mat-icon matSuffix>vpn_key</mat-icon>
            <mat-error>
              <div *ngIf="p.password.invalid && (p.password.dirty ||p.password.touched)"
              >
                <div *ngIf="p.password.errors.required">
                  {{'_PasswordRequired' | translate}}
                </div>
                <div
                  *ngIf="p.password.errors.minlength || p.password.errors.maxLength"> {{'_PasswordValidation' | translate}}</div>
              </div>
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_ConfirmPassword'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="ConfirmPassword">
            <mat-icon matSuffix>vpn_key</mat-icon>
            <mat-error>
              <div *ngIf="p.ConfirmPassword.invalid && (p.ConfirmPassword.dirty || p.ConfirmPassword.touched)"
              >
                <div *ngIf="p.ConfirmPassword.errors.required">
                  {{'_ConfirmPasswordRequired' | translate}}
                </div>
                <div *ngIf="p.ConfirmPassword.errors.mustMatch"> {{'_PasswordMustMutch' | translate}}</div>
              </div>
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_CompanyName'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="company_name">
            <mat-icon matSuffix>card_travel</mat-icon>
            <mat-error *ngIf="partnerForm.get('company_name').hasError('required')">
              {{'_CompanyNameRequired' |  translate}}
            </mat-error>
          </mat-form-field>


          <mat-form-field appearance="legacy" class="w-100 text-left">
            <mat-label>{{'_Categories' | translate}}</mat-label>
            <mat-select formControlName="list_categories" multiple>
              <mat-select-trigger>
                {{p.list_categories.value ? p.list_categories.value[0] : ''}}
                <span *ngIf="p.list_categories.value?.length > 1" class="example-additional-selection">
        (+{{p.list_categories.value.length - 1}} {{p.list_categories.value?.length === 2 ? 'other' : 'others'}})
      </span>
              </mat-select-trigger>
              <mat-option *ngFor="let item of appService.categories" (onSelectionChange)="addControl($event , item)" class="text-left"
                          [value]="item.title">{{item.title}}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="legacy" class="w-100 text-left" *ngFor="let item of p.list_categories.value">
            <mat-label>{{item}} {{'_Count' | translate}}</mat-label>
            <input matInput [formControlName]="item" type="number">
            <mat-error>
              {{item}} {{'_CountRequired' | translate}}
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="legacy" class="w-100 text-left">

            <mat-label>{{'_Website' | translate}}</mat-label>
            <input matInput formControlName="website">
            <mat-error>
             {{'_WebsiteIncorrect' | translate}}
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_SelectCity' | translate}}</mat-label>
            <mat-select formControlName="city">
              <mat-option>-- None --</mat-option>
              <mat-option value="option" *ngFor="let item of appService.cities"
                          [value]="item._id">{{item.title}}</mat-option>
            </mat-select>
            <mat-error *ngIf="partnerForm.get('company_name').hasError('required')">
              {{'_CityRequired' |  translate}}
            </mat-error>
          </mat-form-field>
          <div class="d-flex">
            <mat-form-field appearance="legacy" class="text-left w-100 mr-1">
              <mat-label>{{'_CompanyLocation'|  translate}}</mat-label>
              <input matInput placeholder="Company Location" formControlName="area" type="text" readonly>
              <mat-error *ngIf="partnerForm.get('area').hasError('required')">
                {{'_AreaRequired' |  translate}}
              </mat-error>
            </mat-form-field>
            <button class="btn btn-secondary h-3" (click)="openMap()"><i class="fa fa-map" aria-hidden="true"></i>
            </button>
          </div>


          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_TradLicenceIssued' | translate}}</mat-label>
            <input matInput [matDatepicker]="pickerIssue" formControlName="date_issue_licences">
            <mat-datepicker-toggle matSuffix [for]="pickerIssue"></mat-datepicker-toggle>
            <mat-datepicker #pickerIssue></mat-datepicker>
          </mat-form-field>

          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_TradLicenceExpired' | translate}}</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="date_expired_licences">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <div class="w-100 my-3 text-left">
            <span id="filename" *ngIf="!fileName">{{'_UploadTradeLicence' | translate}}</span>
            <span id="filename" *ngIf="fileName">{{fileName}}</span>
            <label class="text-white" for="file-upload">{{'_Browse' | translate}}<input type="file" id="file-upload"
                                                                                        (change)="uploadFile($event)"
                                                                                        accept="application/pdf"></label>
          </div>

          <mat-form-field appearance="legacy" class="text-left w-100">
            <mat-label>{{'_VerificationCode'|  translate}}</mat-label>
            <input matInput placeholder="" formControlName="otp" maxlength="4">
            <mat-icon matSuffix>vpn_key</mat-icon>
            <mat-error *ngIf="partnerForm.get('otp').hasError('required')">
              {{'_VerificationCodeRequired' |  translate}}
            </mat-error>
          </mat-form-field>

          <div class="mt-3">
            <button *ngIf="isOTP"
                    class="btn btn-primary radius-15 w-100 bg-success text-primary mb-3" [disabled]="partnerForm.invalid"
                    (click)="register('company')">{{'_Register' | translate}}</button>
          </div>
          <div>
            <app-social-integration></app-social-integration>
          </div>
          <div class="text-center mt-5">
            <a style="cursor: pointer" (click)="isOTP = false">{{ '_ResendVerificationCode' | translate}}</a>
          </div>
        </form>

      </mat-tab>
    </mat-tab-group>


  </div>
</div>
